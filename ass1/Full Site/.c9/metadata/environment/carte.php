{"filter":false,"title":"carte.php","tooltip":"/carte.php","undoManager":{"mark":-1,"position":-1,"stack":[[{"start":{"row":0,"column":0},"end":{"row":62,"column":7},"action":"remove","lines":["<html>","<?php","session_start();","// isset method to check if the variable exists ","// check if the user submitted some data in the textbox","if (isset($_POST['p_id']) && isset($_GET['p_id'])){","            $id = $_GET['p_id'];","        }","        ","        if (!isset($_SESSION['cart'])){","            $_SESSION['cart'] = [];","        }","        $quantity = $_POST['quantity'];","if (isset ($_POST['quantity'])) {","// check if the data is recorded from the previous submission","// !(true)=false","   $_SESSION['cart']=array(); // Declaring session array","   array_push($_SESSION['cart'],'apple','mango','banana'); // Items added to cart","","   if (!isset($_SESSION['cart'])) {","      ","      echo \"CART\".\"<br>\".\"<br>\";","      echo \"Product: \".$_POST['p_name'].\"<br>\";","      echo \"Price: \".$_POST['p_price'].\"<br>\";","      echo \"Quantity: \".$_POST['quantity'].\"<br>\".\"<br>\";","      echo \"Total Price: \".$_POST['p_price']*$_POST['quantity'].\"<br>\".\"<br>\";","      // write a code here to initialize the session counter","      $_SESSION['times'] = 0;","   } else {","      // write a code here to increment the counters","      do {","      echo \"CART\".\"<br>\";","      echo \"Product: \".$_POST['p_name'].\"<br>\";","      echo \"Price: \".$_POST['p_price'].\"<br>\";","      echo \"Quantity: \".$_POST['quantity'].\"<br>\";","      echo \"Total Price: \".$_POST['p_price']*$_POST['quantity'].\"<br>\";","      break;","        } while ($_SESSION['times'] <= 30);","","   }","","   // write a code below to assign the new values submitted from formdata to the session data ","   $_SESSION['cart'] = $_POST['quantity'];","   ","   ","   ","   // display the current data","   //echo \"current data = \".$_SESSION['cart'].\"<br>\";","} else {","   echo \"No data was submitted<br>\";","}","session_destroy();","?>","","<form >","   <input type=\"Submit\" value=\"Check Out\">","  <input type=\"button\" name=\"resetIFrame\" value=\"Reset\" ","       class=\"button\" onclick=\"reset(frame3);\"/>","  ","</form>","","","</html>"],"id":16},{"start":{"row":0,"column":0},"end":{"row":74,"column":7},"action":"insert","lines":["","<!DOCTYPE html>","    ","</header>","<html>","    <head>","        <meta charset=\"utf-8\">","        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> ","        <link rel=\"stylesheet\" href=\"../css/style.css\">","","    </head>","    <body>","        <main>","        <?php","        // 0. Check if product_id has been called from catalogue.php","        if (isset($_POST['p_id']) && isset($_GET['p_id'])){","            $id = $_GET['p_id'];","        }","","        // check if a session has already been created, if not make new session","        if (!isset($_SESSION['cart'])){","            $_SESSION['cart'] = [];","        }","        // $_SESSION[\"currentID\"] = $id;","","        $quantity = $_POST['quantity'];","        ","        $item = [","            \"id\" -> $id,","            \"name\" -> $pname,","            \"price\" -> $pprice,","            \"quantity\" -> $quantity,","            \"stock\" -> $in_stock","        ];","","        array_push($_SESSION['cart'], $item);","","        // 1. Connect to Database","        $conn = mysqli_connect(\"localhost\", \"uts\", \"internet\", \"assignment1\"); // server host, username, password, database name","        //  aax5grlzdab4wq.cldcl6stxuy9.us-east-1.rds.amazonaws.com","","        ","        // 2. Run a query","        $query_string = \"select * from  products where product_id = $id;\";","","        // 3. Execute a query","        $result = mysqli_query($conn, $query_string);","","        // 4. Number of return rows","        $num_rows = mysqli_num_rows($result);","        // echo $num_rows; // check and see if the code above runs properly or not","","        // 5. Display values","        if ($num_rows > 0 ) {","            if ( $a_row = mysqli_fetch_array($result) ) { // 4. To retrieve the rows","            // this form comes from catalogue to product","            echo \"<form action ='cart.php' name='products' method='GET' target='frame3' onSubmit='quantityNotification();'>\";","           ","                    echo \"$row\".\"['id']\";","                    echo \"$row\".\"['name']\";","                    echo \"$row\".\"['unit_price']\";","                    echo \"$row\".\"['price']\";","                    echo \"$row\".\"['stock']\";","                    echo \"testing <input type='number' id='quantityNotification' min='1' value='1'>\"; // Button ","                ","                echo \"<input type='submit' value='add' class='buy' name='add to cart' target='cart'>\";","            echo \"</form>\";","            }","        }","        ?>","","        </main>","        ","    </body>","</html>"]}],[{"start":{"row":12,"column":8},"end":{"row":12,"column":39},"action":"insert","lines":["$quantity = $_POST['quantity'];"],"id":15}],[{"start":{"row":11,"column":9},"end":{"row":12,"column":0},"action":"insert","lines":["",""],"id":14},{"start":{"row":12,"column":0},"end":{"row":12,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":9,"column":8},"end":{"row":11,"column":9},"action":"insert","lines":["if (!isset($_SESSION['cart'])){","            $_SESSION['cart'] = [];","        }"],"id":13}],[{"start":{"row":7,"column":9},"end":{"row":8,"column":0},"action":"insert","lines":["",""],"id":12},{"start":{"row":8,"column":0},"end":{"row":8,"column":8},"action":"insert","lines":["        "]},{"start":{"row":8,"column":8},"end":{"row":9,"column":0},"action":"insert","lines":["",""]},{"start":{"row":9,"column":0},"end":{"row":9,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":5,"column":0},"end":{"row":7,"column":9},"action":"insert","lines":["if (isset($_POST['p_id']) && isset($_GET['p_id'])){","            $id = $_GET['p_id'];","        }"],"id":11}],[{"start":{"row":4,"column":55},"end":{"row":5,"column":0},"action":"insert","lines":["",""],"id":10}],[{"start":{"row":9,"column":0},"end":{"row":9,"column":3},"action":"insert","lines":["   "],"id":9}],[{"start":{"row":8,"column":3},"end":{"row":9,"column":78},"action":"insert","lines":["$_SESSION['cart']=array(); // Declaring session array","array_push($_SESSION['cart'],'apple','mango','banana'); // Items added to cart"],"id":8}]]},"ace":{"folds":[],"scrolltop":300,"scrollleft":0,"selection":{"start":{"row":45,"column":0},"end":{"row":50,"column":7},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1654712354257,"hash":"e51334d63575f387b84f653cdef9760aa9eb69c7"}